import { Callout } from "nextra-theme-docs";

# Linuxda Grafika

Maqolaning maqsadi

Ushbu keng qamrovli maqolaning maqsadi Linux operatsion tizimidagi grafikalarning nozik tomonlarini yoritishdir. Linux server muhitida, embedded tizimlarda va yaqinda, hatto iste'molchi uchun ish-stollarida keng qo'llanilishiga qaramay, ko'plab foydalanuvchilar va ishlab chiquvchilar uning grafik quyi tizimi bilan to'liq tanish emas. Ushbu qism dasturiy ta'minot ishlab chiquvchilari, Linux ishqibozlari, system administratorlar va Linuxning grafika bilan qanday ishlashini tushunishga qiziqqan barcha texnologiyaga ega bo'lgan barcha shaxslar uchun manba bo'lib xizmat qilishiga qaratilgan.


#### Linux grafikasi haqida qisqacha ma'lumot

Linuxda grafik ishlov berish - bu ekranda vizual chiqishni ta'minlash uchun uzluksiz o'zaro ta'sir qiluvchi komponentlar majmuasini o'z ichiga olgan murakkab, ko'p bosqichli jarayon. Ushbu komponentlar qatoriga 2D va 3D vektorli grafikalarni koʻrsatish, GUI yaratish, software applicationlar va grafik hardwarelar oʻrtasidagi aloqani taʼminlashgacha boʻlgan bir qator funksiyalarni taklif qiluvchi librarylar kiradi.

Bundan tashqari, Linux grafik muhiti doimiy ravishda rivojlanib bormoqda, landshaftni qayta belgilashga qaratilgan yangi tendentsiyalar va texnologiyalar. Ushbu maqola Linuxning grafik ishlovi, librarylar(kutubxona), kernel roli, jalb qilingan drayverlar va ushbu makonni shakllantiradigan kelajakdagi qiziqarli tendentsiyalarni to'liq ko'rib chiqadigan ushbu elementlarni o'rganadi.

Ushbu maqolaning oxiriga kelib, o'quvchilar Linuxda grafikalar haqida yaxshi tushunchaga ega bo'ladilar, bu esa rivojlanish, muammolarni bartaraf etish yoki shunchaki shaxsiy qiziqishni qondirish uchun keyingi tadqiqotlar uchun mustahkam poydevor yaratadi. Keling, Linux grafikasining jozibali dunyosiga sayohatimizni boshlaylik.


## Linuxda grafikaning qisqacha tarixi

Linuxda grafika tarixi o'ttiz yildan ortiq davom etadigan va Linux kernelining o'zi evolyutsiyasi bilan uzviy bog'liq bo'lgan sayohatdir. Bu innovatsiyalar, hamjamiyat hamkorligi va yuqori samarali, to'liq open-source grafik stackga tinimsiz intilish bilan ajralib turadigan hikoya.

##### Erta kunlar (1990-yillar)

Sayohat 1990-yillarning boshida, Linux kerneli Linus Torvalds tomonidan birinchi marta chiqarilgandan so'ng boshlangan. Dastlabki kunlarda Linux o'ziga xos grafik tizimiga ega emas edi. U asosan buyruq qatori interfeyslari(CLI) orqali boshqarildi, grafik displeylar uchun juda oddiy yordam bilan. Ammo foydalanuvchilar uchun qulayroq interfeysga ehtiyoj paydo bo'lishi bilan, `X11` yoki oddiygina `X` deb nomlanuvchi `X Window System` Unix dunyosidan qabul qilindi.

Dastlab 1984 yilda `Massachusetts` texnologiya institutida ishlab chiqilgan X Window System grafik tasvirlarni ko'rsatish va oynalarni boshqarish uchun asosiy mexanizmlarni taqdim etdi, ammo u standart ko'rinish va hisni aniqlamadi. Ushbu moslashuvchanlik KDE va GNOME kabi turli xil desktop environmentlarini tug'dirdi, ularning har biri o'ziga xos estetika va xatti-harakatlarga ega. 

`X Window System` (1984 yildan hozirgi kungacha) X, X11 yoki X Window System nomi bilan ham tanilgan, Unix-ga o'xshash operatsion tizimlarda, jumladan Linuxda grafik foydalanuvchi interfeyslari uchun asos bo'lgan protokol va dasturiy ta'minot. X 1980-yillarning o'rtalarida MITda Linuxdan oldin ishlab chiqilgan. Linux ishlab chiqilganda, u o'zining grafik muhiti uchun X ni qabul qildi. X GUI-ni ishlab chiqish uchun asosiy asosni taqdim etadi, bu ilovalarga GUI elementlarini ko'rsatish, sichqonchani bosish va tugmalarni bosish va hokazolarni boshqarish imkonini beradi. Biroq, X ish stoli(desktop) qanday ko'rinishini aniqlamaydi; bu window manageri va desktop environmentning roli. 

`Window Managerlar` (1980-yillar - hozirgi) Window Manager - bu X Window System muhitida oynalarning ko'rinishi va joylashishini boshqaradigan X clientlari. Birinchi window managerlaridan ba'zilari `TWM` (Tab Window Manager) va keyinchalik `FVWM` (F Virtual Window Manager) ni o'z ichiga olgan. Ular minimalist va zamonaviy standartlarga nisbatan juda qulay emas edi, lekin ular keyingi rivojlanish uchun asos bo'ldi.

`Desktop Environment` (1990-yillar - hozirgi) 1990-yillarning oʻrtalaridan oxirigacha ishlab chiquvchilar yanada kengroq desktop environment(ish stoli muhitlari)ni yaratishni boshladilar. KDE (K Desktop Environment) Unix workstationlari uchun birinchi desktop environment bo'lib, birinchi marta 1996 yilda chiqarilgan. GNOME, yana bir mashhur desktop environment 1999 yilda chiqarilgan. KDE ham, GNOME ham kengroq ilovalar, sozlamalar va yordamchi dasturlar to'plamini taqdim etgan. Linux kundalik foydalanuvchilar uchun qulayroq. Ular vazifalar paneli(taskbar), ishga tushirish menyusi va drag-and-drop(sudrab tashlash) fayllarni boshqarish kabi xususiyatlarni o'z ichiga olgan.

#### Grafik stackni yetishtirish (2000-yillar)

2000-yillarning boshida to'g'ridan-to'g'ri ko'rsatish infratuzilmasi (Direct Rendering Infrastructure DRI) ko'rinishida sezilarli yutuqlarga erishildi. DRI applicationlarga X serverini chetlab o'tish va grafik qurilmalarga to'g'ridan-to'g'ri kirish imkonini berdi, bu esa ishlashning sezilarli yaxshilanishiga olib keldi, ayniqsa 3D grafikalar va o'yinlar uchun juda muhim.

2000-yillarda, shuningdek, Linux platformasida `OpenGL`ni impelement qiluvchi open-source loyiha `Mesa`ning rivojlanishi va yetukligi kuzatildi. Mesa hardware-accelerated 3D grafikalarni taqdim etish uchun DRI bilan birgalikda ishladi. Taxminan bir vaqtning o'zida, grafik karta ishlab chiqaruvchilari, ayniqsa Nvidia va AMD, Linux uchun xususiy drayverlarni taklif qila boshladilar, bu esa grafik ish faoliyatini yanada yaxshilaydi.

`Compositing Window Manager`(Window Managerlarni kompozitsiyalash) (2000-yillar - hozirgi) 2000-yillarning o'rtalarida Compiz, KWin (KDE uchun) va Mutter (GNOME uchun) kabi kompozitsion window managerlari paydo bo'ldi. Ular har bir oynani ekranda ko'rsatishdan oldin uni ekrandan tashqari buferda ko'rsatish orqali ko'zni qamashtiruvchi grafik effektlarni taqdim etdi.

#### Modernizatsiya sari (2010-yillar)

Ushbu yutuqlarga qaramay, X Window System o'zining cheklovlariga ega edi, birinchi navbatda uning yoshi va dizayn falsafasidan kelib chiqqan holda, zamonaviy grafik qurilmalardan to'liq foydalana olmagan. Yechim 2008 yilda `Kristian Høgsberg` tomonidan boshlangan yangi displey protokoli `Wayland` ko'rinishida paydo bo'ldi. Wayland zamonaviy kompozitsion window managerlari bilan yaratilgan soddaroq va samaraliroq displey tizimini taqdim etish orqali X11 o'rnini bosishni maqsad qilgan.

Bu davrda yana bir muhim texnologiya, Kernel Mode Setting (KMS)(kernel rejimni sozlash) paydo bo'ldi. KMS ko'chirilgan rejimni sozlash(mode setting) vazifalari, jumladan, grafik rejimlarni(mode) tanlash va frame bufferlarini o'rnatish, Linux kerneliga. Bu yuklash jarayonlari(boot process) va resolution switche tugmachalarini yumshatishga olib keldi, shuningdek, yanada ilg'or grafik texnologiyalar uchun poydevor qo'ydi.

`Wayland` (2012 - hozirgi): X Window System chekloclariga yechim sifatida ishlab chiqilgan. Birinchi marta 2012 yilda chiqarilgan Wayland grafik muhitni yaratish uchun sodda va zamonaviy protokoldir. Bu X-ga qaraganda xavfsizroq va samaraliroq, ammo uni qabul qilish sekin kechdi, chunki u mavjud dasturiy ta'minotning katta qismini qayta yozishni talab qiladi.

`Vulkan` (2016 yildan hozirgi kungacha) Vulkan - yuqori unumdor 3D grafika uchun low-leveladagi, o'zaro faoliyat platformali API. U GPU ustidan ko'proq to'g'ridan-to'g'ri nazorat(direct control ) qilish va protsessordan kamroq foydalanishni taklif qilish uchun mo'ljallangan, bu video o'yinlar va boshqa grafik talab qiladigan ilovalar uchun foydalidir.

#### Hozirgi kun (2020-yildan)

Bugungi kunda Linux grafik stacklari rivojlanishda davom etmoqda. Wayland tobora ommalashib bormoqda, garchi Xorg moslik sabablari tufayli keng qo'llanilsa ham. Open Source grafik drayverlar sezilarli darajada yaxshilandi, ko'pincha xususiylar bilan teng sharoitlarda raqobatlashdi. Vulkan, yangi avlod grafikasi va hisoblash API-si ishlab chiquvchilarga grafik qurilmalar ustidan ko'proq nazoratni ta'minlab, o'ziga jalb etilmoqda.

Waylandni qabul qilishning ko'payishi (2020-2021): Wayland o'zining soddalashtirilgan yondashuvi va yaxshi xavfsizligi tufayli ancha vaqtdan beri X ning vorisi sifatida e'tirof etilgan. Ushbu davrda Wayland turli xil Linux distribyutorlari bo'ylab qabul qilishning kuchayishini ko'rdi. Masalan, Fedora Fedora 25 (2016) dan beri Wayland-dan standart bo'yicha foydalanmoqda, ammo Ubuntu Ubuntu 21.04 (2021) da uni standart bo'yicha ishlata boshladi. GNOME bir muncha vaqtdan beri Wayland-ni qo'llab-quvvatlab kelmoqda, ammo bu davrda KDE-ning Wayland-ni qo'llab-quvvatlashi sezilarli darajada yaxshilandi.

Vulkanni rivojlantirishni davom ettirish (2020-2021): 3D grafika uchun low-leveldagi, yuqori samarali, o'zaro faoliyat platformali yechimni ta'minlovchi Vulkan API keyingi qabul qilish va ishlab chiqishda davom etdi. 2021-yildan boshlab u oʻyinlarni ishlab chiqishda, jumladan, AAA oʻyin sarlavhalari va Linux oʻyinlarida Valve’ning Proton moslik vositasi tufayli tobora koʻproq foydalanilmoqda.

Linux kerneli grafik quyi tizimi yutuqlari (2020-2021): Linux kernelining grafik subsystemi ham ushbu davrda muntazam yangilanishlarni koʻrdi. Misol uchun, Direct Rendering Manager (DRM) subsystemdagi yaxshilanishlar izchil bo'ldi, jumladan, AMD va Intel GPU-larni yaxshiroq qo'llab-quvvatlash.

`PipeWire` (2020-2021): PipeWire - `PulseAudio` va `JACK `o'rnini bosuvchi Linux ostida audio va video bilan ishlashni yaxshilashga qaratilgan loyiha. Bu shuningdek, grafikaga ham ta'sir qiladi, chunki u Wayland ostida ekran almashish va masofaviy ish stoliga yordam berish uchun mo'ljallangan, stsenariylarda Waylandning xavfsizlikka yo'naltirilgan dizayni X11 ostida qo'llaniladigan an'anaviy usullarni qiyinlashtirdi.

HDR-ni qo'llab-quvvatlash (2020-2021): Yana bir muhim yutuq - Intelning open-source jamoasining katta hissasi bilan Linux ostida yuqori dinamik diapazonli (HDR) displeyni qo'llab-quvvatlash bo'yicha olib borilayotgan ishlar. 2021 yil holatiga ko'ra, Linux ekotizimida HDR joriy etish hali ham ishda.

Bular 2020 va 2021 yillarda Linux grafik landshaftida roʻy bergan baʼzi yutuqlar. Biroq bu soha butun dunyo boʻylab bir qancha ishlab chiquvchilar, hamjamiyat va kompaniyalarning hissasi bilan doimiy ravishda rivojlanib bormoqda.

Linux-dagi grafik sayohati open-source rivojlanish kuchidan dalolat beradi, uning hamkorlik, innovatsiya va doimiy takomillashtirish ruhini o'zida aks ettiradi. Linux oldinga siljishi bilan uning grafik tizimlari rivojlanishda davom etadi va foydalanuvchilar va ishlab chiquvchilarga ko'proq imkoniyatlar, yaxshi ishlash va ko'proq moslashuvchanlikni beradi.

## Linux Graphics Stack

Linux Graphics Stack - bu layerli structura(qatlamli tuzulma) bo'lib, u kompyuter applicationlariga kompyuter ekranida tasvirlarni yaratish, o'zgartirish va ko'rsatish imkonini beradi. Stack application leveldan boshlanadi va hardwaregacha bo'lgan jarayonni o'z ichiga oladi. Buni layerma-layer ko'rib chiqanuz


`Application Layer` stackning yuqori qismi applicationlar joylashgan joy. Bu sizning web-browserngiz, matn muhariringiz yoki ekraningizga tasvir yoki matnni ko'rsatishi kerak bo'lgan boshqa turdagi application(dastur, ilova) bo'lishi mumkin.

`Toolkit Layer` Applicationlar foydalanuvchi interfeyslarini(user interface) ko'rsatishga yordam berish uchun ko'pincha grafik toolkitlardan foydalanadilar. Ushbu toolkitlar tugmalar(button), matn maydonchalari(text boxes), slayderlar(slider) va boshqalar kabi oldindan tayyorlangan elementlar kutubxonalarini taqdim etadi. Masalan, `GTK`, `Qt` yoki `FLTK`.

`Window System Layer` Keyingi layer Window System Layer. Ushbu layer oynalarni(window) boshqa joyga ko'chirish, o'lchamlarini o'zgartirish yoki Z-tartibini o'zgartirish kabi asosiy imkoniyatlarni taqdim etadi. Ko'pgina Linux tizimlarida bu `X Window System (X11)` yoki `Wayland` bo'ladi.

`Compositing Window Manager` Window System Layerning ustiga qo'yish - Compositing Window Manager. Hamma tizimlarda ham bunday layer bo'lmaydi. Compositing Window Managerlari (masalan, Compiz yoki Mutter) ekranga yuborishdan oldin oynalarni buferga birlashtiradi. Bu shaffoflik(transparency), animatsiya yoki 3D desktop kabi effektlarni beradi.

`Window System Server Layer` Window System Server Layeri client applicationlari(mijoz ilovalari) va display hardware o'rtasidagi aloqani boshqarish uchun javobgardir. Linuxda buning eng keng tarqalgan misoli `X11` bilan ishlaydigan tizimlardagi `X Server` bo'lishi mumkin.

`Graphics Library Layer`  Window System Serveri ostida Graphics Library(grafik kutubxona) joylashgan. Bu dasturiy ta'minotning GPU bilan standartlashtirilgan tarzda o'zaro ishlashiga imkon beruvchi APIni taqdim etadi. Bu yerda asosiy misol - `OpenGL` va `Vulkan` kabi bir nechta grafik API-larni amalga oshiradigan `Mesa`.

`Kernel Mode Setting (KMS) va Direct Rendering Manager (DRM) layeri` Bu layer to'g'ridan-to'g'ri kernel bilan ishlaydi. KMS resolutionni aniqlash, rang chuqurligi(color depth) va refresh rateni(yangilanish tezligi) uchun javobgardir. DRM Linux kernelining subsystem(quyi tizi)mi bo'lib, u GPU-lar bilan interfeysga ega va memory management, interrupt handling va DMA kabi vazifalarni bajaradi.

`Kernel Layer` kernel operatsion tizimning asosiy qismidir. U to'g'ridan-to'g'ri hardware bilan bog'lanadi va memory management va task scheduling(vazifalarni rejalashtirish) kabi low-leveldagi service(xizmat)larni taqdim etadi.

`Hardware Layer` stackning pastki qismi actual grafik hardwaredir. Bu `NVIDIA GeForce`, `AMD Radeon` yoki `Intel` integratsiya qilingan GPU kabi bo'lishi mumkin bo'lgan grafik kartangiz.

Stackning har bir layer(qatla)mi to'g'ridan-to'g'ri uning ustidagi va ostidagi layerlar bilan bog'lanib, abstraktsiya darajasini ta'minlaydi. Bu dasturiy ta'minotni ishlab chiquvchilarga boshqa layerlarning barcha tafsilotlarini tushunmasdan turib, o'zlarining maxsus vazifalariga e'tibor qaratish imkonini beradi.


## Hardware Layer

Linux grafik staxkining hardware layeri grafiklarni haqiqiy renderlash va ko'rsatish bilan shug'ullanadigan jismoniy(physical) komponentlardan iborat. Ushbu komponentlar GPU (Graphics Processing Unit), video xotira (VRAM- Video random-access memory) va monitorlar yoki ekranlar kabi displey hardwareni o'z ichiga oladi.

`GPU` Graphics Processing Unit grafiklarni ko'rsatish uchun zarur bo'lgan hisob-kitoblar uchun optimallashtirilgan maxsus protsessordir. U tizimning asosiy protsessoridan mustaqil ishlaydi va boshqa vazifalar uchun resurslarni bo'shatadi. GPU piksellarni chizish, teksturalar bilan ishlash va 3D grafikalar va animatsiyalar uchun zarur bo'lgan murakkab calculationlarni bajarish uchun javobgardir.

GPU bir nechta asosiy elementlardan iborat

`GPU Core` Bu GPUning yuragi. GPU core instructionlarni bajarish va actual computationlarni bajarish uchun javobgardir. Muayyan GPU modeliga qarab, u yuzlab yoki hatto minglab corelarga ega bo'lishi mumkin. Har bir core bir vaqtning o'zida bir nechta thereadlarni boshqarish uchun mo'ljallangan, shuning uchun GPUlar parallel ishlov berishda juda samarali.

`CUDA Corelar/Stream Processor` Bular GPU coresidagi parallel protsessorlar bo'lib, ular mos ravishda NVIDIA va AMD o'zlarining GPUlarida foydalanadilar. CUDA corelari NVIDIA GPU-lariga xos bo'lib, bir vaqtning o'zida ko'p vazifalarni bajarish uchun mo'ljallangan qayta ishlash coresining bir turidir. AMD ning ekvivalenti Stream Processor deb ataladi.

`Memory` Bu GPU-ning o'ziga xos maxsus operativ xotirasi bo'lib, ko'pincha VRAM (Video Random Access Memory) deb ataladi. U teksturalarni, framebufferni va GPU ko'rsatish uchun zarur bo'lgan boshqa ma'lumotlarni saqlash uchun ishlatiladi. Yuqori darajali grafik protsessorlarda ko'pincha juda yuqori ma'lumotlarni uzatish tezligini bajara oladigan katta hajmdagi `GDDR6 `(Graphics Double Data Rate 6) xotirasi yoki HBM (High Bandwidth Memory) mavjud.

`Memory Bus` Memory Bus GPU coresi VRAM bilan aloqa qiladigan yo'ldir. Kengroq mmemory busi bir vaqtning o'zida ko'proq ma'lumotlarni uzatish imkonini beradi, bu esa ishlashga sezilarli ta'sir ko'rsatishi mumkin.

`Memory Clock` Bu GPU xotirasining ishlash tezligini bildiradi. Bu ma'lumotni xotiradan o'qish va xotiraga yozish tezligiga ta'sir qiladi, bu GPUning umumiy ishlashiga ta'sir qiladi.

`Clock Speed` Clock Speed GPU coresining ishlash tezligidir. Yuqori clock Speed odatda tezroq ishlashni anglatadi, lekin ular ko'proq issiqlik hosil bo'lishiga ham olib kelishi mumkin.

`Shader Unit` Bu effektlar va ranglarni ko'rsatish uchun ishlatiladigan GPU ichidagi maxsus ishlov berish birliklari. Ular vertex, geometriya va piksel soyasi bilan bog'liq keng ko'lamli vazifalarni bajarish uchun dasturlashtirilishi mumkin.

`Texture Mapping Unit (TMU)` Bular 3D modellarga teksturalarni qo'llash uchun javobgardir. GPUdagi TMUlar soni uning murakkab teksturali yuzalarni ko'rsatish qobiliyatiga ta'sir qilishi mumkin.

`Render Output Unit (ROP)` Ular tasvirlashning oxirgi bosqichlarini, masalan, anti-aliasingni boshqaradi va yakuniy piksel ma'lumotlarini xotiraga yozadi. ROPlar soni GPU ning tasvirlarni yuqori aniqlikda ko'rsatish qobiliyatiga ta'sir qilishi mumkin.

`Thermal Design Power (TDP)` Bu GPU og'ir yuk ostida ishlab chiqarishi kutilayotgan issiqlikning maksimal miqdorini bildiradi. Bu GPU uchun zarur sovutish yechimlarini aniqlash uchun muhimdir.

`Power Connector` Bular GPU ni ishlashi uchun zarur quvvat bilan ta'minlaydi. Yuqori darajadagi GPUlar yuqori quvvat sarfi tufayli ko'pincha bir nechta quvvat ulagichlarini talab qiladi.

`PCI Express Interface` Bu GPU kompyuterning qolgan qismi bilan aloqa qiladigan ulanish. PCI Express interfeysining tezligi va kengligi GPUning umumiy ishlashiga ta'sir qilishi mumkin.

`Video portlar` Bular GPU uchun chiqishlar(output) va ular displeylarni ulash uchun ishlatiladi. Umumiy turlarga HDMI, DisplayPort va DVI kiradi.

Esda tutingki, ushbu elementlarning barchasi grafik tasvirlash va hisoblash vazifalari uchun optimal ishlashni ta'minlash uchun uyg'unlikda ishlashga mo'ljallangan. Ushbu elementlarning o'ziga xos soni va konfiguratsiyasi GPU modeliga va undan foydalanish maqsadiga qarab juda farq qilishi mumkin.

Shuni ham aytib o'tish kerakki GPU mavzusini o'zi katta mavzu shuning uchun qisqa to'xtalib o'tdik ))

![Image](/images/article/linux-de/24.jpg)

![Image](/images/article/linux-de/25.jpg)

<Callout type="info" emoji="">
GPU ni yaxshiroq tushunish uchun animatsion videolar

[Graphics Processing Unit (GPU)](https://youtu.be/bZdxcHEM-uc)

[What's Inside Your GRAPHICS CARD?](https://youtu.be/SrAMBi_8tIk)

[How does Computer Hardware Work 3D Animatsiya](https://youtu.be/d86ws7mQYIg?t=528)

![Image](/images/article/linux-de/23.jpg)

NVIDIA GeForce RTX 3070
</Callout>

`Video Random Access Memory (VRAM)` - kompyuter graphics processing unit (GPU) ishlov beradigan tasvir va video ma'lumotlarni saqlash uchun kompyuterlarda ishlatiladigan xotira turi. VRAM protsessor va video karta protsessori o'rtasidagi buferdir. Nomidan ko'rinib turibdiki, bu tasodifiy kirish, ya'ni GPU unda saqlangan ma'lumotlarga tezda kirishi mumkin.

VRAM frame bufferi bo'lib xizmat qiladi, bu asosan hozirda ko'rsatilayotgan tasvirlar uchun ma'lumotlarni saqlaydigan xotira ("frame buffer" buferidagi "frame"). Nisbatan sekin bo'lgan monitor va ancha tez bo'lgan protsessor o'rtasidagi tezlik farqi tufayli frame bufferi kerak.

Grafik kartaga kerak bo'lgan VRAM miqdori o'yinlaringiz yoki boshqa grafik talab qiladigan vazifalarni bajarayotganingizning ruxsatiga bog'liq. Yuqori aniqlik uchun ko'proq VRAM kerak. Xuddi shunday, anti-aliasing, yuqori dinamik diapazon (HDR) va murakkab yoritish yoki soya algoritmlari kabi ilg'or grafik texnikasi ko'proq VRAMni talab qiladi.

VRAM turlariga quyidagilar kiradi:

`GDDR (Graphics Double Data Rate)` Bu DDR xotira turi, lekin grafik kartadan foydalanish uchun maxsus moʻljallangan. U GDDR2, GDDR3, GDDR4, GDDR5, GDDR6 va GDDR6X versiyalarini o'z ichiga oladi. Har bir keyingi versiya odatda avvalgilariga nisbatan yaxshilanishlarni taklif etadi, masalan, quvvatni yaxshiroq boshqarish yoki yuqori tezlik.

`HBM (High Bandwidth Memory)` Bu yuqori sifatli grafik kartalar va HPC (High Performance Computing) da qo'llaniladigan yuqori samarali RAM interfeysi. HBM GDDR xotira turlariga qaraganda kamroq quvvat sarflagan holda yuqori xotira tarmoqli kengligiga erishish uchun keng interfeysli arxitekturadan foydalanadi.

`SGRAM (Synchronous Graphics RAM)` Ushbu turdagi VRAM kompyuterning bus speedi bilan bir xil tezlikda ishlaydi. Hozirgi kunda u kamroq tarqalgan, ammo ba'zi eski grafik kartalarda ishlatilgan.

VRAM GPU ning muhim komponenti bo‘lib, uning hajmi, tezligi va samaradorligi GPU ishlashiga sezilarli ta’sir ko‘rsatishi mumkin. Zamonaviy grafik protsessorlar odatda eng yuqori darajadagi kartalarda bir necha gigabaytdan 24 Gb gacha bo'lgan VRAM miqdoriga ega.

<Callout type="info" emoji="">
![Image](/images/article/linux-de/26.jpg)
</Callout>

`Monitorlar/Ekranlar(Monitors/Screens)` Bular aslida foydalanuvchiga ko'rsatilgan grafiklarni ko'rsatadigan chiqish qurilmalari( output device). Ular GPU dan yakuniy tasvir ma'lumotlarini oladi va uni ko'rsatilishi mumkin bo'lgan formatga aylantiradi. Monitorlar kichik mobil displeylardan tortib yuqori aniqlikdagi katta ekranlargacha bo'lgan har xil turdagi, o'lcham va resolutionlarda bo'lishi mumkin.

Monitorlar haqida gapirganda e'tiborga olish kerak bo'lgan ba'zi asosiy jihatlar

Ekran o'lchami: Bu burchakdan burchakka diagonal ravishda o'lchanadi. Ish stoli monitorlari uchun odatiy o'lchamlar taxminan 20 dyuymdan 32 dyuymgacha yoki undan kattaroq, noutbuk ekranlari esa odatda 12 dan 17 dyuymgacha.

Resolution: Bu ekranda ko'rsatilgan piksellar sonini bildiradi va odatda kenglik x balandlik sifatida ifodalanadi. Masalan, 1920x1080 o'lchamdagi monitor displeyning kengligi bo'ylab 1920 pikselni va balandligi bo'yicha 1080 pikselni ko'rsatishi mumkin. Yuqori aniqlik aniqroq, aniqroq tasvirni anglatadi, lekin ko'proq grafik quvvat talab qiladi. Umumiy resolutionlarga 1080p (Full HD), 1440p (2K yoki QHD) va 2160p (4K yoki UHD) kiradi.

Aspect Ratio: Bu ekran kengligining balandligiga nisbati. Eng keng tarqalgan tomonlar nisbati 16:9, ammo 21:9 (ultra keng) va 4:3 (eski monitorlarda qo'llaniladi) kabi boshqa nisbatlar ham mavjud.

Panel turi: Bu ekranda tasvirni yaratish uchun ishlatiladigan texnologiya turiga ishora qiladi. Eng keng tarqalgan turlari TN (Twisted Nematic), VA (Vertical Alignment) va IPS (In-Plane Switching). Har birining o'ziga xos kuchli va zaif tomonlari bor, IPS odatda eng yaxshi rang aniqligi va ko'rish burchaklarini ta'minlaydi, TN eng tez javob vaqtini taklif qiladi va VA o'rta darajadagi tanlovdir.

Refresh Rate: Bu monitorning soniyada yangi ma'lumotlar bilan yangilanishi va gerts (Hz) bilan o'lchanadigan soni. Odatda yangilanish tezligi(Refresh Rate) 60Hz, 120Hz, 144Hz va 240Hz ni o'z ichiga oladi. Yuqori yangilanish stavkalari harakatni silliq ko'rinishga olib kelishi va kiritish kechikishini kamaytirishi mumkin, bu ayniqsa tez sur'atli video o'yinlarda qimmatlidir.

Response Time: Bu pikselning qoradan oqga yoki bir kul rangdan ikkinchisiga o‘zgarishini qanchalik tez ko‘rsatishini o‘lchaydi. Kamroq javob vaqti(response time) tezroq harakat paytida kamroq xiralashgan harakat va aniqroq tasvirni anglatadi.

Color Depth(rang chuqurligi) Bu monitor qancha rang ko'rsatishi mumkinligini o'lchaydi. Aksariyat monitorlar kamida 16,7 million rangni (24 bitli true color) ko'rsatishi mumkin, ammo professional darajadagi monitorlar 1,07 milliard (30 yoki 32 bit true color) yoki undan ko'p rangni ko'rsatishi mumkin.

Yorqinlik(Brightness): Bu displeydan chiqadigan yorug'lik miqdori va odatda kvadrat metrga (cd/m²) candelalarda o'lchanadi.

Contrast nisbati: Bu monitor ishlab chiqarishga qodir bo'lgan eng yorqin rang (oq) yorqinligining eng quyuq rangga (qora) nisbati. Yuqori kontrast stavkalari, odatda, monitor yanada nozik rang farqlari va chuqurroq qora ranglarni ko'rsatishi mumkinligini ko'rsatadi.

Input Connectorlari: Bular monitorni kompyuteringizga ulash uchun ishlatiladigan portlardir. Umumiy turlarga HDMI, DisplayPort, DVI va VGA kiradi.

Monitorlar, shuningdek, moslashuvchan sinxronlash texnologiyasi (NVIDIA G-Sync yoki AMD FreeSync), o'rnatilgan dinamiklar(built-in speaker), USB portlar, curved ekranlar va boshqalar kabi xususiyatlarga ega bo'lishi mumkin.

<Callout type="info" emoji="">
[Monitorlar haqida animatsion video](https://youtu.be/yxygknX1AiE)
</Callout>

Dasturiy ta'minot nuqtai nazaridan, Linux grafik stackining hardware layeri birinchi navbatda kernel bilan o'zaro ta'sir qiladi, bu esa turli quyi tizimlar(subsystem) va interfeyslar orqali hardwarega low-leveldagi kirishni ta'minlaydi. Bunga GPUga kirishni boshqarish uchun Direct Rendering Manager (DRM), oddiy chizish operatsiyalari uchun framebuffer qurilmasi va videoni suratga olish va chiqarish uchun `Video4Linux` interfeysi kiradi.

GPU va hardware layerining boshqa komponentlari bilan aloqa qilish uchun open-source va xususiy driver dasturiy ta'minotidan foydalaniladi. Driverlar high-leveldagi buyruqlarni operatsion tizimdan hardware tushunadigan low-leveldagi instructionlarga tarjima qiladi. Shuningdek, ular resurslarni boshqaradilar, xatolarni hal qiladilar va grafik hardwarening yaxshi va samarali ishlashini ta'minlash uchun tizimning qolgan qismi bilan muvofiqlashtiradilar.

Ushbu hardware layer Linux grafik stackining qolgan qismi uchun asos bo'lib xizmat qiladi,

## Display Server

Linuxda Displey serverlari foydalanuvchining grafik interfeysida(user interface) asosiy rol o'ynaydi, ular user applicationlari va kompyuterning hardware vositalari, asosan, grafik qurilmalari o'rtasida vositachi vazifasini bajaradi. Displey serverining vazifalari klaviatura va sichqoncha kabi kiritish qurilmalarini boshqarish, qaysi oyna yuqorida bo'lishini hal qilish, tizim resurslarini taqsimlash va oyna mazmunini(window content) ekranga ko'rsatishni o'z ichiga oladi. Displey serverlarini tushunish juda muhim, chunki u Linux grafik stackidagi asosiy komponentlardan biridir. Displey serveri o'z clienlari bilan tarmoqda shaffof yoki oddiygina tarmoqqa ulanishi mumkin bo'lgan displey server protokoli, aloqa protokoli orqali bog'lanadi. Displey serveri har qanday grafik foydalanuvchi interfeysida, xususan, windowing systemida asosiy komponent hisoblanadi. Mustaqil displey serverining server/client munosabatlari bir oz ziddir, chunki "server" odatda katta, uzoq joylashgan machine sifatida tasavvur qilinadi, ammo mustaqil "displey server" kichik, mahalliy(local) tizim bo'lib, ko'pchilik clientlar katta markaziy machinenada bajariiladi. Tushuntirish shundan iboratki, displey serveri displey va kiritish qurilmalari(input device) xizmatlarini taqdim etadi.

### Display server communications protocols

## X11

Displey serveriga misol sifatida kernelning tepasida ishlaydigan `X.Org` serveridir (odatda Unix-ga o'xshash kernel, masalan, Linux yoki BSD). U foydalanuvchi ma'lumotlarini oladi (masalan, Linux-dagi evdev-dan) va uni clientlaridan biriga uzatadi. Displey serveri o'z clientlaridan ma'lumotlarni ham oladi; u ma'lumotlarni qayta ishlaydi, birlashtirishni amalga oshiradi va Linuxda ma'lumotlarni uchta kernel komponentlaridan biriga - DRM, gem yoki KMS drayveriga uzatadi. Komponent ma'lumotlarni framebufferga yozadi va framebufferning mazmuni ulangan ekranga uzatiladi va ko'rsatiladi. X `GLX` ga tayanadi.

GLX ("OpenGL Extension to X Window System" ning boshlang'ich belgisi) X Window System kernel protokolining kengaytmasi(extension) bo'lib, OpenGL va X Window System o'rtasidagi interfeysni hamda OpenGLning o'zi uchun kengaytmalarni ta'minlaydi. Bu OpenGL-dan foydalanishni xohlovchi dasturlarga buni X Window System tomonidan taqdim etilgan windowda amalga oshirish imkonini beradi. GLX ikkita "state" ni ajratadi: indirect state(bilvosita state) va direct state(bevosita state).

Displey serveri kontseptsiyasining amalga oshirilishidan biri bu X Window System, xususan uning amalda qo'llanilgan versiyasi - X.Org Server va Xlib va XCB clientlar kutubxonalari. X.Org serveri displey serveridir, lekin joriy tatbiqida u kompozitsiyani bajarish uchun ikkinchi dasturga, ya'ni compositing window managerga tayanadi. Misollar Mutter yoki KWin. X11 displey server protokolini implement qiladigan displey serverlarining diqqatga sazovor namunalari `X.Org Server`, `XFree86`, `XQuartz` va `Cygwin/X`, X11 displey server protokolini implement qiluvchi clientlar kutubxonalari esa Xlib va XCB hisoblanadi.

![Image](/images/article/linux-de/19.png)

<Callout type="info" emoji="">
Rasm: X.Org Server o'z clientlari bilan muloqot qiladi, masalan. Amarok, X11 protokoli orqali
</Callout>

## Wayland

Wayland displey server protokolini impplement qiladigan displey serverlari Wayland kompozitorlari deb ataladi. Har qanday displey serveri singari, Wayland kompozitori ham o'z clientlari uchun kirish va chiqishni boshqarish uchun javobgardir va X11 dan farqli o'laroq - qo'shimcha ravishda kompozitsiya uchun. Masalan, `Weston`, `Mutter`, `KWin` yoki `Enlightenment`.

Wayland kompozitorlari Wayland displey serveri protokoli orqali Wayland clientlari bilan bog'lanadi. Ushbu protokol clientlar EGL rendering API yordamida to'g'ridan-to'g'ri ma'lumotlarni framebufferga yozishi mumkinligini belgilaydi. Displey serveri hali ham qaysi oynaning tepasida ekanligini va shuning uchun foydalanuvchiga ko'rinadiganligini hal qiladi, shuningdek, evdev-dan o'z clientlariga kirish qurilmalariga tegishli ma'lumotlarni uzatish uchun javobgardir.

Wayland ma'lum darajada Fedora kabi ba'zi Linux ish stoli(desktop) distributivlarida qo'llaniladi. U mobil kompyuterlar uchun ham juda mos keladi va masalan, smartfon va planshetlarga yo'naltirilgan `Tizen`, `Sailfish OS` va `AsteroidS` loyihalari tomonidan qabul qilingan.

Wayland dasturi MIT litsenziyasi, libwayland-client va libwayland-server kutubxonalari(libraray) ostida mavjud.
ChromeOS-ga Wayland yordamini qo'shish bo'yicha ishlar davom etmoqda.

![Image](/images/article/linux-de/20.jpg)

<Callout type="info" emoji="">
Rasm: Wayland displey server protokoli
</Callout>

## Mir

Mir displey serveri o'zining Mir displey server protokoli bilan birga keladi, bu X11 va Wayland tomonidan qo'llaniladigan protokollardan farq qiladi. Mir qo'shimcha ravishda X11 protokolini qo'llab-quvvatlaydi. U`Canonical` tomonidan ishlab chiqilgan va Ubuntu uchun tanlangan displey serveri bo'lishga mo'ljallangan edi. Mir Canonical kompaniyasining X.org va Waylandni chetlab o'tib, Ubuntu uchun noldan boshlab displey serverini yaratishga urinishi edi. Maqsad, ish stolidan tortib telefonlargacha bo'lgan qurilmalarda ishlaydigan tizim yaratish edi. Biroq, turli omillar tufayli Canonical o'z e'tiborini Waylandga qaratdi. 2017 yildan boshlab u Ubuntu desktop editionlari uchun Wayland displey serveri bilan almashtirildi.

GPLv3 ostida mavjud Mir displey serveri, libmir-server va libmir-mijoz kutubxonalarining ilovalari mavjud.

![Image](/images/article/linux-de/20.png)

## Kernel Mode Setting (KMS)


Kernel Mode Setting (KMS) Linux kerneli grafik stackidagi metod bo'lib, kernelga grafik rejim displeylari bilan bog'liq sozlamalarni boshqarish imkonini beradi. Bu kernelga grafik qurilmalar ustidan toʻliq nazoratni taʼminlovchi texnika boʻlib, flicker-free boot processlari(miltillashsiz yuklash), crash recovery va multi-seat computing kabi qator afzalliklarni beradi.
![Image](/images/article/linux-de/15.jpg)

KMS dan oldin User Mode Setting (UMS) ishlatilgan, bu yerda rejimni sozlash operatsiyalari X serveri tomonidan user spaceda amalga oshirilgan. Biroq, KMS-ga o'tish X serverining endi imtiyozsiz ishlashini anglatadi, bu esa umuman xavfsizroq tizimni ta'minlaydi.

KMSning texnik tomonini yaxshiroq ko'rib chiqamiz

`Responsibility of KMS`  Nomidan ko'rinib turibdiki, rejim sozlamalari(mode setting) monitoringizning piksellar sonini, rang chuqurligini(color depth) va yangilanish tezligini(refresh rate) sozlashdir. KMS shuningdek, matn va grafik konsollar o'rtasida almashinish, bir nechta monitorlarni sozlash va to'xtatib turish(suspend) va davom ettirish hodisalarini boshqarish uchun javobgardir.

`DRM/KMS API` KMS Linux kernelidagi subsystem(quyi tizim) bo'lgan Direct Rendering Manager (DRM) orqali amalga oshiriladi. Bu user space dasturlari buyruqlar va ma'lumotlarni GPUga yuborish uchun foydalanishi mumkin bo'lgan APIni taqdim etadi. Ushbu API frame bufferlarini yaratish va boshqarish, monitor rejimini o'rnatish va framelar orasidagi smooth transition uchun sahifalarni aylantirish(page flipping) funksiyalarini o'z ichiga oladi.
![Image](/images/article/linux-de/13.png)
![Image](/images/article/linux-de/14.png)

`Frame Buffer va Display Controllers:` Frame Buffer(Kadr bufer)i display controller tomonidan displeyga yuboriladigan bitmapni o'z ichiga olgan RAMning bir qismidir. KMS user applicationlariga frame bufferlarini yaratish va ular bilan bog'liq event(hodisa)larni boshqarish imkonini beradi. KMS GPUda mavjud bo'lgan `CRTCs` (Cathode Ray Tube Controllers) yoki display controllerlarini boshqaradi, ular frame buferidan ma'lumotlarni o'qiydi va ularni display hardwarega uzatadi.

![Frame Buffer](/images/article/linux-de/9.jpg)
![Frame Buffer](/images/article/linux-de/10.jpg)
![Frame Buffer](/images/article/linux-de/11.jpg)
![Frame Buffer](/images/article/linux-de/12.jpg)

`Atomic Mode Setting` An'anaviy KMSga nisbatan yaxshilanish sifatida kiritilgan Atomic Mode Setting - bu displey rejimlarini atomic tarzda yoki bir vaqtning o'zida(all-at-once) sozlash imkonini beruvchi metod. Ilgari, displey rejimini o'rnatish uchun bir nechta `IOCTLs (I/O Controls)` kerak edi va har bir IOCTL mos kelmaydigan holatlarga olib keladigan muvaffaqiyatsizlik ehtimoli bor edi. Atom rejimini sozlash barcha o'zgarishlarni bir vaqtning o'zida amalga oshirishga ruxsat berish orqali bu muammoni hal qiladi, barqaror va xatosiz rejim sozlamalarini ta'minlaydi.

`Boshqa komponentlar bilan o'zaro ta'sir` KMS Linux grafik stackining boshqa qismlari, masalan, Mesa (3D grafikalar uchun umumiy interfeysni ta'minlovchi user-space grafik kutubxonasi) va X server yoki Wayland (kirish va oynalarni boshqarish uchun mas'ul) bilan birgalikda ishlaydi.

KMS dan foydalanish va uning davom etayotgan takomillashtirilishi displey miltillashini kamaytirish va zamonaviy grafik hardware va funksiyalarni yaxshiroq qo'llab-quvvatlash orqali Linuxda foydalanuvchi tajribasini sezilarli darajada yaxshiladi.


## Direct Rendering Manager (DRM)

Direct Rendering Manager (DRM) Linux kernelining quyi tizimi(subsystem) bo'lib, zamonaviy video kartalarning GPU-lari bilan o'zaro bog'lanish uchun javobgardir va dasturlarning grafik qurilmalar bilan o'zaro ta'siri uchun umumiy API taqdim etadi. DRM user-space dasturlari buyruqlar va ma'lumotlarni GPUga yuborish va displeyning rejim sozlamalarini sozlash kabi operatsiyalarni bajarish uchun foydalanishi mumkin bo'lgan APIni ochib beradi. DRM birinchi marta X Server Direct Rendering Infratuzilmasining kernel-space komponenti sifatida ishlab chiqilgan , ammo o'shandan beri u Wayland kabi boshqa grafik stack alternativlari va `SDL2 `va `Kodi` kabi mustaqil ilovalar va kutubxonalar tomonidan qo'llanila boshlandi.

User-space dasturlar DRM API-dan GPU-ga hardware-accelerator 3D renderlash va video dekodlash(video decoding), shuningdek, `GPGPU` hisoblashlarini buyurish uchun foydalanishi mumkin. DRM dastlab `XFree86` da Direct Rendering Infrastructure (DRI) qo'llab-quvvatlash uchun ishlab chiqilgan, ammo keyinchalik turli xil grafik funksiyalarni boshqarish uchun kengaytirilgan.

DRM bir necha qismlardan iborat

`Kernel Component` Bu DRM ning asosiy qismidir. U user-space applicationlar uchun grafik qurilmalar bilan o'zaro ishlash uchun API taqdim etadi. Kernel komponenti xotirani boshqarish(memory management), interrupt handling va DMA (Direct Memory Access) kabi narsalar uchun javobgardir. DRM ning ushbu qismi GPU bajarishi kerak bo'lgan vazifalar ro'yxati bo'lgan buyruqlar navbatini ham boshqaradi.

`DRM qurilma drayverlari` Bular har bir grafik kartaga xos bo'lib, hardwarening low-leveldagi tafsilotlarini boshqarish uchun javobgardir. Ular odatda hardware ishlab chiqaruvchilari tomonidan yoziladi, garchi open-source versiyalari ham mavjud.

`Graphics Execution Manager (GEM)` Bu GPU xotirasini boshqarish uchun API. U Intel tomonidan eski `TTM` (Translation Table Maps) boshqaruvchisini almashtirish uchun ishlab chiqilgan va hozirda ko'pgina yirik GPU ishlab chiqaruvchilari tomonidan foydalaniladi. GEM xotirani taqsimlash, almashtirish va GPU uchun ishlov berish bilan shug'ullanadi, shuningdek, turli jarayonlar o'rtasida xotira buferlarini almashish mexanizmini taqdim etadi.

`Kernel Mode Setting (KMS)` Bu kernel modeni sozlash imkonini beruvchi DRM xususiyatidir. Rejimni sozlash(mode setting) - bu video kartaning chiqish formatini (masalan, resolution,, color depth va refresh rate) sozlash jarayoni. Kernelda handling mode settingni sozlash bir qator afzalliklarga ega, masalan, xatolarni yanada ishonchli tiklash va foydalanuvchi interfeyslari o'rtasida yumshoqroq o'tish.

`DMA-BUF` Bu turli drayverlarga bir xil xotira buferini almashish imkonini beruvchi bufer almashish mexanizmi. Bu, ayniqsa, murakkab grafik sozlamalari uchun foydalidir, bu yerda ma'lumotlar bir nechta GPU o'rtasida yoki GPU va video dekoderlar yoki displey kontrollerlari kabi boshqa qurilmalar o'rtasida almashish kerak bo'lishi mumkin.

`DRM Driver` GPU ning har bir turi uchun ushbu GPU bilan qanday bog'lanishni biladigan DRM drayveri mavjud. DRM drayveri user-space applicationlar tomonidan taqdim etilgan umumiy buyruqlar va ma'lumotlarni GPU tomonidan talab qilinadigan maxsus formatga tarjima qiladi. Ko'p DRM drayverlari mavjud bo'lib, ularning har biri ma'lum bir GPU yoki GPU oilasiga moslashtirilgan.

`User-space Componet` Bu DRM ning applicationlar bilan oʻzaro aloqada boʻlgan qismidir. User-space komponenti applicationlar DRM kernel komponenti orqali GPUga buyruqlar va ma'lumotlarni yuborish uchun foydalanishi mumkin bo'lgan kutubxonani (libdrm) taqdim etadi. Bu ilovalarga grafik hardwaredan qurilma qanday ishlashini tafsilotlarini bilmasdan foydalanish imkonini beradi.

`Direct Rendering Infrastructure (DRI)` Bu DRM tizimining bir qismi bo'lib, u user-space applicationlarga X serverini chetlab o'tish va grafik hardwarega bevosita kirish imkonini beradi. Bu 3D ilovalari ish faoliyatini sezilarli darajada yaxshilashi mumkin.

DRM ekranda grafiklarni ko'rsatish bilan bog'liq vazifalarni boshqarishda asosiy rol o'ynaydi, grafik qurilmaning murakkabligini mavhumlashtiradi va Linux grafik stackidagi yuqori qatlamlarga asosiy grafik uskunasining o'ziga xos xususiyatlaridan tashvishlanmaslik imkonini beradi.

Texnik darajada, DRM user-space applicationlarga `ioctl` sstem callari orqali buyruqlarni GPUga yuborishga ruxsat berish orqali erishadi. DRM drayveri ushbu buyruqlarni GPUdagi buyruqlar navbatlariga(command queue) surishdan oldin tasdiqlaydi. Zamonaviy GPU-larda bir nechta buyruqlar navbati(multiple command queue) bir vaqtning o'zida bir nechta vazifalarni bajarish uchun ishlatilishi mumkin, bu esa GPU-dan umumiy foydalanish va unumdorlikni oshiradi.

## X Window System (X11)

X Window System (X11 yoki oddiygina X) - bu Unix-ga o'xshash operatsion tizimlarda keng tarqalgan bitmapli displeylar uchun windowing system.

X GUI environment uchun asosiy asosni taqdim etadi: displey qurilmasida oynalarni chizish va ko'chirish, sichqoncha va klaviatura bilan o'zaro ishlash. X foydalanuvchi interfeysini majburlamaydi - bu alohida dasturlar tomonidan boshqariladi. Shunday qilib, X-ga asoslangan muhitlarning vizual uslubi juda farq qiladi; turli dasturlar tubdan farqli interfeyslarni taqdim etishi mumkin.

X 1984 yilda Massachusetts Institute of Technology (MIT) Athena loyihasining bir qismi sifatida paydo bo'lgan. X protokoli 1987 yil sentyabridan beri 11-versiyada (shuning uchun "X11") mavjud.
X.Org Foundation MIT Litsenziyasi va shunga o'xshash ruxsat beruvchi litsenziyalar ostida bepul va open-source dasturiy ta'minot sifatida mavjud bo'lgan X.Org Server joriy ma'lumotnomasi bilan X loyihasini boshqaradi.

X Window System (X11)ning turli tarkibiy qismlari va tushunchalari

`X Server` X server X Window systemning asosiy komponentidir. U client dasturlari va tizim hardware bilan aloqa qiladi. Server graphical output (window) uchun so'rovlarni(requestlarni) qabul qiladi va foydalanuvchi ma'lumotlarini (klaviatura, sichqoncha yoki sensorli ekrandan) qaytarib yuboradi. Serverning funksionalligi displeyni boshqarish, kiritilgan ma'lumotlarni qayta ishlash va clientlar foydalanishi mumkin bo'lgan resurslarni boshqarishni o'z ichiga oladi.

`X Client` X clientlari X Window Systemda ko'rsatiladigan amaliy dasturlardir. Clientlar server bilan oynalar(window) yaratish, ularni chizish, input eventlarini qabul qilish (klavishlar yoki sichqonchani bosish kabi) va boshqalar bilan bog'lanadi. E'tibor bering, X terminologiyasida client dastur, server esa displeydir; bu siz kutgan narsaning aksi.

`X protokoli` X protokoli X clientlari va X server o'rtasida ishlatiladigan aloqa protokoli. Protokol mijozlardan serverga buyruqlar yuborish (oyna yaratish, grafiklarni chizish va h.k.) va serverdan input eventlarini clientlarga yuborish uchun ishlatiladi. X protokoli tarmoq uchun shaffofdir(network-transparent), ya'ni u tarmoq ulanishlari orqali ishlashi mumkin, bu esa masofaviy grafik interfeyslarga imkon beradi.

`Xlib va XCB kutubxonalari` Xlib (X Library) va XCB (X protocol C-language Binding) applicationlar (clientlar) uchun X Window Systemdan foydalanish funksiyalarini taʼminlovchi kutubxonalardir. Bu kutubxonalar X protokoli tafsilotlari bilan ishlaydi, bu esa applicationlar uchun X dan foydalanishni osonlashtiradi. XCB Xlib o‘rnini bosish uchun mo‘ljallangan yangiroq kutubxona bo‘lib, yaxshilangan unumdorlikni va X protokoliga quyi darajadagi(lower-level) kirishni taklif qiladi.

`Window Manager` Window Manager(Oyna menejeri) X Window Systemidagi oynalarning ko'rinishi va joylashishini boshqaruvchi X clientdir. U title bar, minimize/maximize tugmalari, oʻlchamini oʻzgartirish mumkin boʻlgan oynalar va boshqalar kabi xususiyatlarni taqdim etishi mumkin. Window Manageri oynalarni ko'chirish va o'lchamlarini o'zgartirish kabi operatsiyalarni bajarish uchun javobgardir va u boshqalar oldida qaysi oynalar ko'rsatilishi polisini belgilaydi.

`Display Manager` Display Manageri grafik kirish(login) menejeri bo'lib, u X serverida xuddi shu yoki boshqa kompyuterdan seansni boshlaydi. Umumiy misollar orasida `LightDM`, `GDM` va `XDM` mavjud.

`Compositing Manager` Kompozitlash menejeri ixtiyoriy komponent bo'lib, u 3D animatsiyalari, shaffoflik, soyalar va boshqalar kabi ilg'or oyna effektlarini ta'minlaydi. Kompozitlash menejeri barcha renderlashni ekrandan tashqari buferlarga yo'naltirish orqali ishlaydi, so'ngra yakuniy natijani ishlab chiqarish uchun har bir oynaning buferini ekranga birlashtiradi. E'tiborli misollar orasida `Compiz` va `xcompmgr` mavjud.

`Desktop Environment` Desktop Environment tizimdan foydalanish uchun to'liq grafik foydalanuvchi interfeysini ta'minlaydi. U odatda window manager, file manager, menyu va ishlaydigan ilovalar ro'yxati, utilitalar va toollar va boshqalarga ega panellarni o'z ichiga oladi. Desktop Environmentlariga misol qilib `GNOME`, `KDE`, `XFCE` va `LXDE` va boshqalar kiradi.

X Window System yuqori darajada sozlanishi va turli xil hardware va dasturiy ta'minot bilan ishlatilishi mumkin. Unix-ga o'xshash operatsion tizimlarda grafik ilovalarni ishlab chiqishning standartlashtirilgan usulini taqdim etadi. Biroq, Waylandning samaradorligi va soddaligi oshgani uchun ba'zi distribyutorlarda u asta-sekin yangi Wayland protokoli bilan almashtirilmoqda.

## Mesa3D

Mesa, shuningdek, `Mesa3D` va `The Mesa 3D Graphics Library` deb ataladi, `OpenGL`, `Vulkan` va boshqa grafik API spetsifikatsiyalarining open-source implementationi. Mesa ushbu spetsifikatsiyalarni vendor-specific grafik qurlma drayverlariga tarjima qiladi.  Uning eng muhim foydalanuvchilari asosan Intel va AMD tomonidan o'zlarining tegishli qurilmalari uchun ishlab chiqilgan va moliyalashtirilgan ikkita grafik drayverdir (AMD o'zlarining Mesa drayverlarini Radeon va RadeonSI-ni eskirgan AMD Catalyst orqali targ'ib qiladi va Intel faqat Mesa drayverini qo'llab-quvvatlaydi). Xususiy grafik drayverlar (masalan, Nvidia GeForce drayveri va Catalyst) barcha Mesa-ning o'rnini bosadi va grafik API-ni o'z amalga oshirishini ta'minlaydi. `Nouveau` deb nomlangan Mesa Nvidia drayverini yozish bo'yicha op-souce harakat asosan hamjamiyat tomonidan ishlab chiqilgan. O'yinlar kabi 3D ilovalardan tashqari, zamonaviy displey serverlari (X.org, `Glamour` yoki `Wayland Weston`) `OpenGL/EGL`dan foydalanadi; shuning uchun barcha grafikalar odatda Mesa orqali o'tadi. 

![Image](/images/article/linux-de/15.jpg)

Mesa `freedesktop.org` saytida joylashgan va `1993 yil avgust` oyida loyihada hali ham faol bo'lgan `Brayan Pol` tomonidan boshlangan. Keyinchalik Mesa keng tarqalgan bo'lib qabul qilindi va hozirda butun dunyo bo'ylab turli shaxslar va korporatsiyalarning, shu jumladan OpenGL spetsifikatsiyasini boshqaruvchi Khronos Group grafik qurilmalari ishlab chiqaruvchilarining ko'plab hissalarini o'z ichiga oladi. Linux uchun rivojlanish qisman crowdfunding(Crowdfunding - bu loyihalar va biznesni moliyalashtirish uchun pul yig'ish usuli.) tomonidan ham amalga oshirildi.

![Image](/images/article/linux-de/18.jpg)

Mesa bir nechta renderlash API-larini qo'llab-quvvatlaydi, jumladan:

`OpenGL` Bu 2D va 3D vektor grafikalarini ko'rsatish uchun cross-language(tillararo), cross-platform(platformalararo) API. Mesa OpenGL spetsifikatsiyasining bir nechta versiyalarini to'liq amalga oshirishni ta'minlaydi.

`Vulkan` Bu Khronos Groupning yangiroq, low-overhead grafik API (u ham OpenGLni boshqaradi). Vulkan OpenGL bilan solishtirganda GPU-ni to'g'ridan-to'g'ri boshqarishni va protsessorni kamroq yuklashni taklif qiladi. Mesa Vulkan 1.0 spetsifikatsiyasining to'liq amalga oshirilishini ta'minlaydi.

`OpenCL` Bu turli xil platformalarda, jumladan CPU, GPU, DSP va boshqalarda bajariladigan dasturlarni yozish uchun asosdir. Mesa-ning OpenCL-ni qo'llab-quvvatlashi OpenGL va Vulkan kabi to'liq bo'lmasa-da, u hali ham turli xil hisoblash ilovalari uchun ishlatilishi mumkin.

Ichkarida Mesa ikkita asosiy komponentga ega:

`State Trackers` Bular Mesa komponentlari boʻlib, ular ommaga moʻljallangan grafik API-larni (masalan, OpenGL yoki Vulkan) amalga oshiradi. Ular API ning joriy holatini (masalan, joriy rang, transformatsiya matritsasi va h.k.) kuzatib boradi va API callarini qurilmadan mustaqil oraliq ko‘rinishga tarjima qiladi.

`Gallium3D` Bu abstraction layer va 3D renderlash uchun yagona, drayverga bog'liq bo'lmagan APIni(driver-independent) ta'minlovchi yordamchi utilita(helper utilitie). Bu turli hardware drayverlariga umumiy kodni almashish imkonini beradi va yangi hardware yoki API uchun qo'llab-quvvatlashni osonlashtiradi. Gallium3D dan foydalanadigan drayverlar odatda an'anaviy drayverlarga qaraganda sodda va qisqaroq.

Mesa shader kompilyatsiyasi uchun ba'zi drayverlarda LLVM dan foydalanadi. Shaderlar GPUda ishlaydigan kichik dasturlar bo'lib, ular tepaliklarni qayta ishlash(vertex processing), piksellarni qayta ishlash(pixel processing) va hokazolar uchun ishlatiladi. LLVM modulli va qayta foydalanish mumkin bo'lgan kompilyator(reusable compiler) va toolchain texnologiyalari to'plamidir va Mesa ushbu shader dasturlarini GPUga yuborishdan oldin optimallashtirish uchun foydalanadi.

Mesa-ning asosiy vazifasi dastur tomonidan amalga oshirilgan API callarini GPU hardare tushunadigan buyruqlarga tarjima qilish, turli hardwarelar o'rtasidagi farqlarni boshqarish va dasturiy ta'minot ishlab chiqaruvchilari uchun yagona interfeysni ta'minlashdir.

![Image](/images/article/linux-de/17.jpg)


## Wayland

Wayland - bu displey serveri va uning clientlari o'rtasidagi aloqani, shuningdek, ushbu protokolning C kutubxonasini implementationi belgilaydigan communication protocoli. Wayland protokolidan foydalanadigan displey serveri Wayland kompozitori deb ataladi, chunki u qo'shimcha ravishda kompozitsion window manager. vazifasini bajaradi. Wayland dastlab `[Kristian Høgsberg](https://github.com/krh)` boshchiligidagi bir guruh ko'ngillilar tomonidan `X Window` tizimini Linux va boshqa Unix-ga o'xshash  operatsion tizimlar uchun zamonaviy, xavfsiz va sodda windowing systemi bilan almashtirish maqsadida bepul va [open-source](https://github.com/krh/wayland) jamoa tomonidan ishlab chiqilgan. Loyihaning manba kodi MIT License, ruxsat beruvchi bepul dasturiy ta'minot litsenziyasi shartlariga muvofiq nashr etiladi. 

Wayland Display Server loyihasi 2008 yilda Red Hat ishlab dasturchisi [Kristian Høgsberg](https://github.com/krh) tomonidan boshlangan.


Kompozitor Kernel Mode Setting (KMS) va evdev input qurilmalari orqali to'g'ridan-to'g'ri hardware bilan ishlaydi. U an'anaviy tarzda Unix-ga o'xshash operatsion tizimlarda qo'llanilgan `X Window System (X11)` ga ancha sodda va zamonaviy muqobilni taqdim etadi.

Wayland paradigmasida kompozitor X11 dan asosiy farqi bo'lgan displey serveridir. X11 da displey serveri window manageri yoki kompozitordan alohida obyekt hisoblanadi. Biroq, Wayland displey serverini, window managerini va kompozitorni birlashtiradi. Bu tizimni soddalashtiradi va samaradorlikni oshiradi.

Wayland kompozitori quyidagilarni bajaradi.

`Window Bufferlarini tasvirga(compozisia) birlashtiradi` Wayland har bir windowning contentini buferga jalb qilish orqali ishlaydi. Keyin kompozitor bu buferlarni oladi va ularni ekranda ko'rsatish uchun bitta tasvirga birlashtiradi.

`Kirish va chiqishni boshqaradi` Wayland kompozitorlari sichqoncha, klaviatura va ekranlar kabi kirish va chiqish qurilmalari bilan bevosita bog'lanadi. Ular ushbu qurilmalardan kirish hodisalarini(event) oladi va ularni tegishli clientga yuboradi. Ular, shuningdek, displey ekranlarida chiqishni boshqaradi.

`Client Isolation` Har bir client faqat o'z windowlari haqida biladi va to'g'ridan-to'g'ri ekranga chiza olmaydi. U boshqa clientlarning maʼlumotlariga yoki buferlariga kirish imkoniga ega emas, bu ularni xavfsizlik maqsadida izolyatsiya qilishga yordam beradi.

Turli kompozitorlarda Wayland protokolining bir nechta turli xil ilovalari mavjud, jumladan Weston (reference implementation), GNOME ning Mutter va KDE ning KWin va boshqalar. Bular desktop environmentlari yoki qo'shimcha protokollar kabi qo'shimcha xususiyatlarni taklif qilishi mumkin.

Wayland zamonaviy kodlar bazasi va xavfsizlikni oshirish kabi bir qator afzalliklarni taklif qilsa-da, u sekinroq qabul qilish tezligiga ega. Bu, asosan, eski X11 applicationlarini qo'llab-quvvatlashdagi qiyinchiliklar va X11 taqdim etgan tarmoq shaffofligi(network transparency) kabi xususiyatlar bilan bog'liq, ammo Waylandda implementaion qiyinroq.

