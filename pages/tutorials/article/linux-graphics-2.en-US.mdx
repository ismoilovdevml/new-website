import { Callout } from "nextra-theme-docs";

# Linuxda Grafika (2-qism) 

### Maqolaning maqsadi

Ushbu maqola Linux-da grafik stack qanday ishlashi, xususan Xorg va Mesa-ga e'tibor qaratish va Linuxda turli stacklari qanday ishlashi haqida texnik tushuncha berishga qaratilgan.

Biz Linuxda keng qoʻllaniladigan displey serveri Xorg va grafik spetsifikatsiyalarning open-source dasturiy taʼminoti Mesa ning roli va arxitekturasini koʻrib chiqamiz. Ushbu elementlarni tushunish Linuxda ilovalarni ishlab chiqish yoki tizimlarni boshqarishni istagan har bir kishi uchun juda muhimdir, chunki ular grafikalar qanday ko'rsatilishi va ko'rsatilishida muhim rol o'ynaydi.

Bundan tashqari, biz GNOME, XFCE4, Cinnamon va KDE kabi turli xil mashhur Linux desktop environmentlarini o'rganamiz, ularning tuzilmalari, komponentlari, konfiguratsiya variantlari va Xorg va Mesa bilan qanday o'zaro ta'sirini tushunamiz.

Siz tajribali Linux foydalanuvchisi bo'lasizmi, tizimingizning ichki ishlashiga qiziqqan yangi foydalanuvchi yoki sozlashingizni optimallashtirishni xohlayotgan tizim administratori bo'lasizmi, ushbu maqola sizga kerakli bilim va tushunchalarni taqdim etishga qaratilgan. 


## Window System Server layer

Bizdagi keyingi layer `Window System Server Layer`. Kompyuterda `windowing system`(oynalash tizimi) (yoki window system) displey ekranlarining turli qismlarini alohida boshqaradigan dasturiy ta'minot to'plamidir. Bu foydalanuvchi interfeysi uchun WIMP(windows, icons, menus, pointer) paradigmasini amalga oshiradigan grafik foydalanuvchi interfeysining (GUI) bir turi.

Har bir hozirda ishlayotgan ilovaga foydalanuvchiga grafik interfeysini ko'rsatish uchun ekranning odatda o'lchami o'zgartiriladigan va odatda to'rtburchaklar yuzasi beriladi; bu oynalar bir-birining ustiga tushishi mumkin, ular bir-birining ustiga chiqishi mumkin bo'lmagan plitka interfeysidan farqli o'laroq. Odatda har bir oynaning atrofida window decorationlari chiziladi. Window decorationlarini va oyna ichidagi mavjud widgetlarni dasturlash, slayderlar, tugmalar va boshqalar kabi foydalanuvchining bevosita o'zaro ta'siri uchun grafik elementlar bo'lib, widget toolkitdan foydalanish orqali osonlashtiriladi va soddalashtiriladi.

Har qanday window systemning asosiy komponenti odatda displey serveri deb ataladi, ammo window serveri yoki compositor kabi muqobil nominatsiyalar ham qo'llaniladi. O'zining grafik interfeysini window(oyna)da ishga tushiradigan va taqdim etadigan har qanday dastur displey serverining clienti hisoblanadi. Displey serveri va uning clientlari bir-biri bilan application programming interface (API) yoki odatda displey server protokoli deb ataladigan communication protocoli orqali bog'lanadi, displey serveri clientlar va foydalanuvchi o'rtasida mediator(vositachi) hisoblanadi.

U kerneldan barcha ma'lumotlarni oladi, kernel barcha biriktirilgan kirish(input) qurilmalaridan, masalan, klaviatura, ko'rsatuvchi qurilmalar yoki sensorli ekrandan oladi va uni to'g'ri clientga uzatadi. Displey serveri clientlarning kompyuter monitoriga chiqishi uchun ham javobgardir. Ovoz chiqishi odatda displey serveri tomonidan boshqarilmaydi, lekin ovoz balandligi odatda GUI appletlari orqali boshqariladi va qaysi ilovalar yuqorida ekanligini displey serveri hal qiladi. Window system kompyuter foydalanuvchisiga bir vaqtning o'zida bir nechta dasturlar bilan ishlash imkonini beradi. Har bir dastur o'zining grafik interfeysini o'z oynasida taqdim etadi, bu odatda ekranning to'rtburchaklar maydonidir.

Dasturchi nuqtai nazaridan windowing system grafik primitivlarni amalga oshiradi. Masalan: shriftlarni ko'rsatish yoki ekranda chiziq chizish. U grafik interfeysning yuqori darajali elementlari, masalan, window manager tomonidan foydalanish uchun grafik hardwarening mavhumligini ta'minlaydi.

Displey server protokoli tarmoqqa qodir yoki hatto tarmoq shaffof(network transparent) bo'lishi mumkin, bu nozik clientlarni implement qilishni osonlashtiradi.


### Display Server

Displey serveri yoki window serveri - bu dastur bo'lib, uning asosiy vazifasi o'z clientlarining operatsion tizimning qolgan qismiga, hardware vositalariga va bir-biriga kirish va chiqishlarini muvofiqlashtirishdir.

Linuxda Displey serverlari foydalanuvchining grafik interfeysida(user interface) asosiy rol o'ynaydi, ular user applicationlari va kompyuterning hardware vositalari, asosan, grafik qurilmalari o'rtasida vositachi vazifasini bajaradi. Displey serverining vazifalari klaviatura va sichqoncha kabi kiritish qurilmalarini boshqarish, qaysi oyna yuqorida bo'lishini hal qilish, tizim resurslarini taqsimlash va oyna mazmunini(window content) ekranga ko'rsatishni o'z ichiga oladi. Displey serverlarini tushunish juda muhim, chunki u Linux grafik stackidagi asosiy komponentlardan biridir. Displey serveri o'z clientlari bilan tarmoqda shaffof(network-transparent) yoki oddiygina tarmoqqa(network-capable) ulanishi mumkin bo'lgan displey server protokoli, communication protocoli(aloqa protokoli) orqali bog'lanadi. Displey serveri har qanday grafik foydalanuvchi interfeysida, xususan, window systemda asosiy komponent hisoblanadi. Mustaqil displey serverining server/client munosabatlari bir oz ziddir, chunki "server" odatda katta, uzoq joylashgan machine sifatida tasavvur qilinadi, ammo mustaqil "displey server" kichik, mahalliy(local) tizim bo'lib, ko'pchilik clientlar katta markaziy machinenada bajariiladi. Tushuntirish shundan iboratki, displey serveri displey va kiritish qurilmalari(input device) xizmatlarini taqdim etadi.

<Callout type="info" emoji="">
![Image](/images/article/linux-de/5.png)
GUI ning asosiy komponentlari: Displey serveri window systemni implement qiladi. Oddiy window manageri shunchaki window decorationlarini chizadi, ammo compositing window managerlari ko'proq narsani qiladilar.
</Callout>

### X Window System

X Window System (X11 yoki oddiygina X) - bu Unix-ga o'xshash operatsion tizimlarda keng tarqalgan bitmapli displeylar uchun oynalash tizimi(windowing system). X GUI muhiti uchun asosiy frameworkni taqdim etadi: displey qurilmasida oynalarni chizish va ko'chirish, sichqoncha va klaviatura bilan o'zaro ta'sir qilish. X foydalanuvchi interfeysini majburlamaydi - bu alohida dasturlar tomonidan boshqariladi. Shunday qilib, X-ga asoslangan muhitlarning vizual uslubi juda farq qiladi; turli dasturlar tubdan farqli interfeyslarni taqdim etishi mumkin.

X 1984 yilda `Massachusetts Institute of Technology (MIT)` Athena loyihasining bir qismi sifatida paydo bo'lgan. X protokoli 1987 yil sentyabr oyidan beri 11-versiyada (shuning uchun "X11") mavjud. X.Org Foundation MIT Litsenziyasi va shunga o'xshash ruxsat beruvchi litsenziyalar ostida bepul va open source dasturiy ta'minot sifatida mavjud bo'lgan X.Org Server joriy ma'lumotnomasi bilan X loyihasini boshqaradi.

X client–server modelidan foydalanadi: X server turli client dasturlari bilan aloqa qiladi. Server graphical output (windows) uchun so'rovlarni(request) qabul qiladi va foydalanuvchi ma'lumotlarini (klaviatura, sichqoncha yoki sensorli ekrandan) qaytarib yuboradi. 

Ushbu client–server terminologiyasi - foydalanuvchi terminali server va applicationlar client bo'lib - ko'pincha yangi X foydalanuvchilarini chalkashtirib yuboradi, chunki atamalar teskari ko'rinadi.

Lekin X oxirgi foydalanuvchi nuqtai nazaridan emas, balki dasturning istiqbolini oladi: X applicationlarga displey va I/O(input output) servicelarini taqdim etadi, shuning uchun u serverdir; applicationlar ushbu servicelardan foydalanadi, shuning uchun ular clientlardir.

Server va client o'rtasidagi aloqa protokoli(communication protocol) tarmoqda shaffof(network-transparent) ishlaydi: client va server bir xil mashinada yoki turli xil qurilmalarda, ehtimol turli arxitektura va operatsion tizimlarda ishlashi mumkin.
Client va server hatto shifrlangan tarmoq seansi orqali ulanishni tunnel qilish orqali Internet orqali xavfsiz muloqot qilishlari mumkin.

#### X.Org Server (X11)

Displey serveriga misol sifatida kernelning tepasida ishlaydigan `X.Org` serveridir (odatda Unix-ga o'xshash kernel, masalan, Linux yoki BSD). U foydalanuvchi ma'lumotlarini oladi (masalan, Linux-dagi evdev-dan) va uni clientlaridan biriga uzatadi. Displey serveri o'z clientlaridan ma'lumotlarni ham oladi; u ma'lumotlarni qayta ishlaydi, birlashtirishni amalga oshiradi va Linuxda ma'lumotlarni uchta kernel komponentlaridan biriga - DRM, GEM yoki KMS drayveriga uzatadi. Komponent ma'lumotlarni framebufferga yozadi va framebufferning mazmuni ulangan ekranga uzatiladi va ko'rsatiladi. X `GLX` ga tayanadi.

GLX ("OpenGL Extension to X Window System" ning boshlang'ich belgisi) X Window System kernel protokolining kengaytmasi(extension) bo'lib, OpenGL va X Window System o'rtasidagi interfeysni hamda OpenGLning o'zi uchun kengaytmalarni ta'minlaydi. Bu OpenGL-dan foydalanishni xohlovchi dasturlarga buni X Window System tomonidan taqdim etilgan windowda amalga oshirish imkonini beradi. GLX ikkita "state" ni ajratadi: indirect state(bilvosita state) va direct state(bevosita state).

Displey serveri kontseptsiyasining amalga oshirilishidan biri bu X Window System, xususan uning amalda qo'llanilgan versiyasi - X.Org Server va Xlib va XCB clientlar kutubxonalari. X.Org serveri displey serveridir, lekin joriy tatbiqida u kompozitsiyani bajarish uchun ikkinchi dasturga, ya'ni compositing window managerga tayanadi. Misollar Mutter yoki KWin. X11 displey server protokolini implement qiladigan displey serverlarining diqqatga sazovor namunalari `X.Org Server`, `XFree86`, `XQuartz` va `Cygwin/X`, X11 displey server protokolini implement qiluvchi clientlar kutubxonalari esa `Xlib` va`XCB` hisoblanadi.

<Callout type="info" emoji="">
![Image](/images/article/linux-de/19.png)

Rasm: X.Org Server o'z clientlari bilan muloqot qiladi, masalan. Amarok, X11 protokoli orqali
</Callout>


